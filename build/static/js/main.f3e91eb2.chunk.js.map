{"version":3,"sources":["components/Loading.js","components/LoginPage/Button.js","components/LoginPage/Input.js","components/LoginPage/Form.js","App.js","store/reducer.js","store/initialState.js","api/api.js","store/store.js","index.js"],"names":["Loading","props","unsubscribe","store","subscribe","document","querySelector","GSAP","fromTo","opacity","duration","from","this","className","React","Component","Button","type","replace","toLowerCase","addEventListener","onClick","enterPress","removeEventListener","Input","placeholder","inputChange","bind","e","target","value","length","to","id","borderColor","maxLength","Form","state","isLoginForm","getState","wasLogin","isSignInForm","errorMessage","undefined","logOrSignInClick","submitClick","form","authTimeoutDuration","_opacityAnimation","logOrSignInClickTimeoit","setTimeout","setState","clearTimeout","formInputs","email","password","username","_inputsToDefault","info","_getInfo","api","logIn","logInAnimationUnsubscribe","auth","focus","_inputsToRed","signInTimeout","signIn","infoInputs","_clearInputs","key","unsubscribeError","errorForm","opacityTimeout","withoutAppear","elem","hasOwnProperty","style","_getInfoForm","App","useState","connectionOpened","setConnectionOpened","isAuthorized","setIsAuthorized","connectionOpenedTimeout","authTimeout","useEffect","reducer","action","initialState","url","messageList","socket","WebSocket","onopen","dispatch","console","log","obj","command","name","send","JSON","stringify","onmessage","parse","data","status","res","Cookie","set","user_key","path","expires","get","errorServer","createStore","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f3e91eb2.chunk.js","sourcesContent":["import React from 'react'\r\nimport GSAP from 'gsap'\r\nimport './scss/loading.scss'\r\n\r\nexport default class Loading extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.unsubscribe = props.store.subscribe(() => {\r\n      const loadingElement = document.querySelector('.loading')\r\n      if (loadingElement) {\r\n        GSAP.fromTo('.loading',{opacity: 1 },{opacity: 0, duration: 0.15})\r\n      }\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    GSAP.from('.loading', {opacity: 0, duration: 0.25})\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribe()\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"loading\" />\r\n  }\r\n}","import React from 'react'\r\nimport '../scss/LoginPage/button.scss'\r\n\r\nexport default class Button extends React.Component {\r\n  componentDidMount() {\r\n    document.querySelector(`.${this.props.type.replace(' ', '-').toLowerCase() + '-btn'}`)\r\n      .addEventListener('click', this.props.onClick)\r\n    if (this.props.type === 'Log In') {\r\n      document.addEventListener('keydown', this.props.enterPress)\r\n    } else if (this.props.type === 'Submit') {\r\n      document.addEventListener('keydown', this.props.enterPress)\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.querySelector(`.${this.props.type.replace(' ', '-').toLowerCase() + '-btn'}`)\r\n      .removeEventListener('click', this.props.onClick)\r\n    if (this.props.type === 'Log In') {\r\n      document.removeEventListener('keydown', this.props.enterPress)\r\n    } else if (this.props.type === 'Submit') {\r\n      document.removeEventListener('keydown', this.props.enterPress)\r\n    }\r\n  }\r\n\r\n  render() {\r\n   return <button\r\n     className={this.props.type.replace(' ', '-').toLowerCase() + '-btn'}\r\n   >\r\n     {this.props.type}\r\n   </button>\r\n }\r\n}","import React from 'react'\r\nimport GSAP from 'gsap'\r\nimport '../scss/LoginPage/input.scss'\r\n\r\nexport default class Input extends React.Component {\r\n  componentDidMount() {\r\n    document.querySelector(`#${this.props.placeholder.toLowerCase()}`)\r\n      .addEventListener('input', this.inputChange.bind(this))\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.querySelector(`#${this.props.placeholder.toLowerCase()}`)\r\n      .removeEventListener('input', this.inputChange.bind(this))\r\n  }\r\n\r\n  inputChange(e) {\r\n    let lengthInput = e.target.value.length\r\n    if (lengthInput !== 0) {\r\n      GSAP.to(`#${e.target.id}`, {borderColor: '#04bc00', duration: 0.15})\r\n    } else {\r\n      GSAP.to(`#${e.target.id}`, {borderColor: '#c40021', duration: 0.15})\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <input\r\n      type={this.props.placeholder.toLowerCase()}\r\n      placeholder={this.props.placeholder}\r\n      id={this.props.placeholder.toLowerCase()}\r\n      className='input-form'\r\n      maxLength={35}\r\n    />\r\n  }\r\n}","import React from 'react'\r\nimport Button from './Button'\r\nimport Input from './Input'\r\nimport GSAP from 'gsap'\r\nimport '../scss/LoginPage/form.scss'\r\n\r\nexport default class Form extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { isLoginForm: props.store.getState().wasLogin, isSignInForm: false, errorMessage: undefined }\r\n    this.logOrSignInClick = this.logOrSignInClick.bind(this)\r\n    this.submitClick = this.submitClick.bind(this)\r\n    this.enterPress = this.enterPress.bind(this)\r\n  }\r\n\r\n  // Events\r\n\r\n  logOrSignInClick(type, form = false) {\r\n    return function () {\r\n      const duration = this.props.authTimeoutDuration\r\n      this._opacityAnimation(duration)\r\n      this.logOrSignInClickTimeoit = setTimeout(() => {\r\n        this.setState(() => {\r\n          return {isLoginForm: type === 'login', isSignInForm: type === 'signIn', errorMessage: undefined}\r\n        })\r\n        clearTimeout(this.logOrSignInClickTimeoit)\r\n      }, duration * 1000)\r\n      if (form) {\r\n        const formInputs = {\r\n          email: document.querySelector('#email'),\r\n          password: document.querySelector('#password'),\r\n          username: document.querySelector('#username')\r\n        }\r\n        this._inputsToDefault(formInputs)\r\n      }\r\n    }.bind(this)\r\n  }\r\n\r\n  submitClick() {\r\n    const info = this._getInfo()\r\n    if (this.state.isLoginForm) {\r\n      if (info.email && info.password) {\r\n        const duration = 0.2\r\n        this.props.store.getState().api.logIn(info.email, info.password)\r\n        this.logInAnimationUnsubscribe = this.props.store.subscribe(() => {\r\n          if (this.props.store.getState().auth) {\r\n            this._opacityAnimation(duration, true)\r\n          }\r\n        })\r\n        const infoInputs = {\r\n          email: document.querySelector('#email'),\r\n          password: document.querySelector('#password'),\r\n          username: document.querySelector('#username')\r\n        }\r\n        infoInputs.email.focus()\r\n      } else {\r\n        this._inputsToRed(info)\r\n      }\r\n    } else if (this.state.isSignInForm) {\r\n      if (info.email && info.password && info.username) {\r\n        const duration = 0.2\r\n        this._opacityAnimation(duration)\r\n        this.signInTimeout = setTimeout(() => {\r\n          this.props.store.getState().api.signIn(info.email, info.password, info.username)\r\n          const infoInputs = {\r\n            email: document.querySelector('#email'),\r\n            password: document.querySelector('#password'),\r\n            username: document.querySelector('#username')\r\n          }\r\n          infoInputs.email.focus()\r\n          this._clearInputs(infoInputs)\r\n          this._inputsToDefault(infoInputs)\r\n          this.setState(() => {\r\n            return {isLoginForm: true, isSignInForm: false}\r\n          })\r\n          clearTimeout(this.signInTimeout)\r\n        }, duration * 1000)\r\n      } else {\r\n        this._inputsToRed(info)\r\n      }\r\n    }\r\n  }\r\n\r\n  enterPress(e) {\r\n    if (e.key === 'Enter' && !this.state.isLoginForm && !this.state.isSignInForm) {\r\n      this.logOrSignInClick('login')()\r\n    } else if (e.key === 'Enter' && (this.state.isLoginForm || this.state.isSignInForm)) {\r\n      this.submitClick()\r\n    }\r\n  }\r\n\r\n  // Lifecycle\r\n\r\n  componentDidMount() {\r\n    this.unsubscribeError = this.props.store.subscribe(() => {\r\n        this.setState((state, props) => { return { errorMessage: props.store.getState().errorForm }})\r\n    })\r\n    GSAP.from('.form', {opacity: 0, duration: 0.75})\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.opacityTimeout) { clearTimeout(this.opacityTimeout) }\r\n    if (this.signInTimeout) { clearTimeout(this.signInTimeout) }\r\n    if (this.logOrSignInClickTimeoit) { clearTimeout(this.logOrSignInClickTimeoit) }\r\n    this.logInAnimationUnsubscribe()\r\n    this.unsubscribeError()\r\n  }\r\n\r\n  _opacityAnimation(duration, withoutAppear=false) {\r\n    GSAP.fromTo('.form', {opacity: 1}, {opacity: 0, duration: duration})\r\n    if (!withoutAppear) {\r\n      this.opacityTimeout = setTimeout(() => {\r\n        GSAP.fromTo('.form', {opacity: 0}, {opacity: 1, duration: duration})\r\n        clearTimeout(this.opacityTimeout)\r\n      }, duration * 1000)\r\n    }\r\n  }\r\n\r\n  _getInfo() {\r\n    return {\r\n      email: document.querySelector('#email').value,\r\n      password: document.querySelector('#password').value,\r\n      username: this.state.isSignInForm ? document.querySelector('#username').value : undefined\r\n    }\r\n  }\r\n\r\n  _inputsToRed(info) {\r\n    if (!info.email) { GSAP.to(`#email`, {borderColor: '#c40021'}) }\r\n    if (!info.password) { GSAP.to(`#password`, {borderColor: '#c40021'}) }\r\n    if (this.state.isSignInForm) {\r\n      if (!info.username) { GSAP.to(`#username`, {borderColor: '#c40021'}) }\r\n    }\r\n  }\r\n\r\n  _inputsToDefault(info) {\r\n    for (let elem in info) {\r\n      if (info.hasOwnProperty(elem) && info[elem]) {\r\n        if (!info[elem].value) { info[elem].style.borderColor = '#e0e0e0' }\r\n      }\r\n    }\r\n  }\r\n\r\n  _clearInputs(info) {\r\n    for (let elem in info) {\r\n      if (info.hasOwnProperty(elem) && info[elem]) {\r\n        if (info[elem].value) {\r\n          info[elem].value = ''\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _getInfoForm(type) {\r\n    return <div className='form'>\r\n      <h2 className='title'>{type === 'login' ? 'Log In' : 'Sign In'}</h2>\r\n      {this.state.errorMessage ?\r\n        <h3 className='errorMessage'>{this.state.errorMessage}</h3> : '' }\r\n      {type === 'signIn' ? <Input placeholder='UserName'/> : ''}\r\n      <Input placeholder='Email'/>\r\n      <Input placeholder='Password'/>\r\n      <Button type='Submit' onClick={this.submitClick} enterPress={this.enterPress}/>\r\n      {type === 'signIn' ? '' : <Button type='Sign In' onClick={this.logOrSignInClick('signIn', true)}/>}\r\n      {type === 'login' ? '' : <Button type='Log In' onClick={this.logOrSignInClick('login', true)}/>}\r\n    </div>\r\n  }\r\n\r\n  render() {\r\n    if (this.state.isLoginForm) {\r\n      return this._getInfoForm('login')\r\n    } else if (this.state.isSignInForm) {\r\n      return this._getInfoForm('signIn')\r\n    }\r\n    return <div className='form'>\r\n      <h2 className='title'>Chat-React</h2>\r\n      <Button type='Log In' onClick={this.logOrSignInClick('login')} enterPress={this.enterPress}/>\r\n      <Button type='Sign In' onClick={this.logOrSignInClick('signIn')}/>\r\n    </div>\r\n  }\r\n}","import React, { useState, useEffect } from 'react'\r\nimport './App.scss'\r\nimport Loading from './components/Loading'\r\nimport Form from './components/LoginPage/Form'\r\n\r\nexport default function App(props) {\r\n  const [connectionOpened, setConnectionOpened] = useState(props.store.getState().connectionOpened)\r\n  const [isAuthorized, setIsAuthorized] = useState(props.store.getState().auth)\r\n  const authTimeoutDuration = 0.2\r\n\r\n  const unsubscribe = props.store.subscribe(() => {\r\n    const connectionOpenedTimeout = setTimeout(() => {\r\n      setConnectionOpened(props.store.getState().connectionOpened)\r\n      clearTimeout(connectionOpenedTimeout)\r\n    }, 150)\r\n    const authTimeout = setTimeout(() => {\r\n      setIsAuthorized(props.store.getState().auth)\r\n      clearTimeout(authTimeout)\r\n    }, authTimeoutDuration * 1000)\r\n  })\r\n\r\n  useEffect(() => {\r\n    return () => { unsubscribe() }\r\n  })\r\n\r\n  return (\r\n    <>\r\n      {connectionOpened ? (\r\n        <div className=\"App\">\r\n          {isAuthorized ?  <p>MainPage</p> : <Form store={props.store} authTimeoutDuration={authTimeoutDuration} /> }\r\n        </div>\r\n      ) : (\r\n        <Loading store={props.store}/>\r\n      )}\r\n    </>\r\n  );\r\n}","function reducer(state, action) {\r\n  switch (action.type) {\r\n    case 'LOGIN': return { ...state, auth: true, errorForm: undefined }\r\n    case 'SIGN_IN': return { ...state, errorForm: undefined }\r\n    case 'CONNECTION_OPENED': return { ...state, connectionOpened:true }\r\n    case 'WRONG_EMAIL_OR_PASSWORD': return { ...state, errorForm: 'Wrong Email or Password' }\r\n    case 'ALREADY_EXIST': return { ...state, errorForm: 'User with this Email is already exist' }\r\n    default: return state\r\n  }\r\n}\r\n\r\nexport default reducer","import API from '../api/api'\r\nimport Cookie from 'js-cookie'\r\n\r\nconst initialState = {\r\n  api: new API(`ws://127.0.0.1:5025`),\r\n  auth: !!(Cookie.get('name') && Cookie.get('user_key')),\r\n  wasLogin: !!Cookie.get('wasLogin'),\r\n  connectionOpened: false,\r\n  errorForm: undefined,\r\n  errorServer: undefined,\r\n}\r\n\r\nexport default initialState","import Cookie from 'js-cookie'\r\nimport store from '../store/store'\r\n\r\nexport default class API {\r\n  constructor(url) {\r\n    this.messageList = []\r\n    try {\r\n      this.socket = new WebSocket(url)\r\n      this.socket.onopen = function () {\r\n        store.dispatch({type: 'CONNECTION_OPENED'})\r\n      }\r\n    } catch(e) {\r\n      console.log(`Server-Error. ${e}`)\r\n    }\r\n  }\r\n\r\n  signIn(email, password, username) {\r\n    const obj = {\r\n      command: 'user_create',\r\n      name: username,\r\n      email: email,\r\n      password: password\r\n    }\r\n    this.socket.send(JSON.stringify(obj))\r\n    this.socket.onmessage = function(e) {\r\n      const res = JSON.parse(e.data)\r\n      if (res.status === 1) {\r\n        store.dispatch({type: 'SIGN_IN'})\r\n      } else {\r\n        store.dispatch({type: 'ALREADY_EXIST'})\r\n      }\r\n    }\r\n  }\r\n\r\n  logIn(email, password) {\r\n    const obj = {\r\n      command: 'user_login',\r\n      email: email,\r\n      password: password,\r\n    }\r\n    this.socket.send(JSON.stringify(obj))\r\n    this.socket.onmessage = function(e) {\r\n      const res = JSON.parse(e.data)\r\n      if (res.status === 1) {\r\n        Cookie.set('user_key', res.user_key, {path: '/', expires: 7})\r\n        Cookie.set('name', res.name, {path: '/', expires: 7})\r\n        store.dispatch({type: 'LOGIN'})\r\n      } else {\r\n        store.dispatch({type: 'WRONG_EMAIL_OR_PASSWORD'})\r\n      }\r\n    }\r\n  }\r\n//TODO SEND, LOGOUT, GETMASSGELIST, DELETE, EDIT\r\n\r\n/*  send(message) {\r\n    const obj = {\r\n      command: 'message_create',\r\n      message: message,\r\n      time: Date.now(),\r\n      user_key: this.cookie.getCookie('id')\r\n    }\r\n    this.socket.send(JSON.stringify(obj))\r\n    this.socket.onmessage = function(e) {\r\n      const res = JSON.parse(e.data)\r\n      if (res.status === 0) {\r\n        this.cookie.delete('id')\r\n        this.cookie.delete('name')\r\n        this.router.redirectToLogin()\r\n      }\r\n    }.bind(this)\r\n  }\r\n\r\n  getMessageList() {\r\n    const obj = {\r\n      command: 'messages_read',\r\n      start: 0,\r\n      end: 100\r\n    }\r\n    this.socket.send(JSON.stringify(obj))\r\n    this.socket.onmessage = function(e) {\r\n      const res = JSON.parse(e.data)\r\n      if (res.status === 1) {\r\n        this.messageList = res.messages.reverse()\r\n        const messageListEvent = this.eventHandler.getCreateMessageListEvent()\r\n        document.dispatchEvent(messageListEvent)\r\n      }\r\n    }.bind(this)\r\n  }\r\n\r\n  logout() {\r\n    const obj = {\r\n      command: 'user_exit',\r\n      user_key: this.cookie.getCookie('id')\r\n    }\r\n    this.socket.send(JSON.stringify(obj))\r\n    this.cookie.delete('id')\r\n    this.cookie.delete('name')\r\n    this.router.redirectToLogin()\r\n  }\r\n\r\n  delete(id) {\r\n    const obj = {\r\n      command: 'message_del',\r\n      id: id,\r\n      user_key: this.cookie.getCookie('id')\r\n    }\r\n    this.socket.send(JSON.stringify(obj))\r\n    this.socket.onmessage = function(e) {\r\n      const res = JSON.parse(e.data)\r\n      if (res.status === 0) {\r\n        console.log(`Wrong ID`)\r\n      }\r\n    }.bind(this)\r\n  }\r\n\r\n  edit(id, messageText) {\r\n    const obj = {\r\n      command: 'message_edit',\r\n      id: id,\r\n      message: messageText,\r\n      user_key: this.cookie.getCookie('id')\r\n    }\r\n    this.socket.send(JSON.stringify(obj))\r\n    this.socket.onmessage = function(e) {\r\n      const res = JSON.parse(e.data)\r\n      if (res.status === 0) {\r\n        console.log(`Wrong ID`)\r\n      }\r\n    }.bind(this)\r\n  }\r\n\r\n  _listenCommand() {\r\n    this.socket.addEventListener('message', e => {\r\n      const res = JSON.parse(e.data)\r\n      if (process.env.MODE === 'DEV') {\r\n        console.log('Listener : ')\r\n        console.log(res)\r\n        console.log(res.command)\r\n      }\r\n      if (res.command === 'message_del' && res.status === 1) {\r\n        this._deleteMessage(res)\r\n        const deleteEvent = this.eventHandler.getDeleteMessageEvent()\r\n        document.dispatchEvent(deleteEvent)\r\n      } else if (res.command === 'message_create' && res.status === 1) {\r\n        this._addMessage(res)\r\n        const sendEvent = this.eventHandler.getSendMessageEvent()\r\n        document.dispatchEvent(sendEvent)\r\n      } else if (res.command === 'message_edit' && res.status === 1) {\r\n        this._editMessage(res)\r\n        const editEvent = this.eventHandler.getEditMessageEvent()\r\n        document.dispatchEvent(editEvent)\r\n      }\r\n    })\r\n  }\r\n\r\n  _deleteMessage(message) {\r\n    this.messageList.some((item, i) => {\r\n      if (+item.id === +message.id) {\r\n        delete this.messageList[i]\r\n        this.messageList = this.messageList.filter((elem) => Boolean(elem))\r\n        return true\r\n      }\r\n    })\r\n  }\r\n\r\n  _addMessage(message) {\r\n    this.messageList.push(message)\r\n  }\r\n\r\n  _editMessage(message) {\r\n    this.messageList.some((item, i) => {\r\n      if (+this.messageList[i].id === +message.id) {\r\n        this.messageList[i].message = message.message\r\n        return true\r\n      }\r\n    })\r\n  }*/\r\n}","import { createStore } from 'redux'\r\nimport reducer from './reducer'\r\nimport initialState from './initialState'\r\n\r\nconst store = createStore(reducer, initialState)\r\n\r\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport store from './store/store'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App store={store} />\n  </React.StrictMode>,\n  document.getElementById('root')\n)"],"sourceRoot":""}